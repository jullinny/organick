let listProductsHTML=document.querySelector(".shop__cards"),listProductHTML=document.querySelector(".product__inner"),relatedProductsHTML=document.querySelector(".related-products__cards"),listCartHTML=document.querySelector(".cart__cards"),listProducts=[],listProduct=[],id=0,cartProducts=[];localStorage.setItem("cartProducts",cartProducts);const initApp=()=>{fetch("https://raw.githubusercontent.com/jullinny/organick/main/js/product.json",{method:"GET"}).then((t=>t.json())).then((t=>{listProductsHTML&&(listProducts=t,addDataHTML()),listProductHTML&&(listProduct=t,addDataOneHTML()),relatedProductsHTML&&(listProducts=t,addDataHTML())}))};initApp();const addDataHTML=()=>{if(listProductsHTML?(listProductsHTML.innerHTML="",length=listProducts.length):relatedProductsHTML&&(relatedProductsHTML.innerHTML="",length=4),listProducts.length>0){for(let t=0;t<length;t++){let e=document.createElement("div");console.log(listProducts.product);const{name:s,prevPrice:o,newPrice:c,tag:n,img:r}=listProducts[t];if(e.classList.add("categories__card"),e.dataset.id=listProducts[t].id,e.innerHTML=`\n        <div class="categories__tag">${n}</div>\n        <a href="shop-single.html">\n          <img class="categories__img" src="images/dist/${r}.avif" alt="${s}">\n          <h6 class="categories__card-title">${s}</h6>\n        </a>\n        <div class="categories__card-footer">\n          <span class="categories__prev-price">$${o}</span>\n          <span class="categories__new-price">$${c}</span>\n          <div class="categories__stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n          </div>\n        </div>\n      </div>\n        `,listProductsHTML)listProductsHTML.appendChild(e);else if(relatedProductsHTML)for(let t=0;t<=4;t++)relatedProductsHTML.appendChild(e)}saveCardId()}},saveCardId=()=>{let t=document.querySelectorAll(".categories__card");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{id=t[e].dataset.id,sessionStorage.setItem("id",id),console.log(id)}))},addDataOneHTML=()=>{listProductHTML.innerHTML="",listProduct.length>0&&listProduct.forEach((t=>{if(id=parseInt(sessionStorage.getItem("id")),id===t.id){let e=document.createElement("div");const{name:s,prevPrice:o,newPrice:c,tag:n,img:r,description:a}=t;e.classList.add("product__card"),e.innerHTML=`\n        <div class="categories__tag product__tag">${n}</div>\n        <img class="product__img" src="images/dist/${r}.avif" alt="${s}">\n        <div class="product__content">\n          <h3 class="product__title">${s}</h3>\n          <div class="categories__stars product__stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n            <img class="categories__stars" src="images/dist/star.svg" alt="stars">\n          </div>\n          <div class="product__price">\n            <span class="categories__prev-price">$${o}</span>\n            <span class="categories__new-price">$${c}</span>\n          </div>\n          <p>${a}\n          </p>\n          <form class="product__order">\n            <label for="product__count">Quantity:</label>\n            <input class="product__count" id="product__count" type="number" value="1">\n            <button class="product__button link" type="button">Add To Cart</button>\n          </form>\n        </div>\n      `,listProductHTML.appendChild(e),addProductToCart(t)}}))},addProductToCart=t=>{let e=document.querySelector(".product__count"),s=document.querySelector(".product__button"),o=document.querySelector(".cart-value"),c=parseInt(o.textContent);s.onclick=function(){let s={id:t.id,name:t.name,img:t.img,newPrice:t.newPrice};cartProducts.length>0?cartProducts.forEach((t=>{t.id!==s.id&&(cartProducts.push(s),localStorage.setItem("cartProducts",JSON.stringify(cartProducts)),addDataCartHTML(cartProducts),sessionStorage.setItem("count",e.value),c+=parseInt(e.value),o.textContent=c)})):(cartProducts.push(s),localStorage.setItem("cartProducts",JSON.stringify(cartProducts)),console.log(JSON.parse(localStorage.getItem("cartProducts"))),addDataCartHTML(cartProducts),sessionStorage.setItem("count",e.value),c+=parseInt(e.value),o.textContent=c)}},addDataCartHTML=t=>{listCartHTML.innerHTML="",t.length>0&&t.forEach((t=>{id=parseInt(sessionStorage.getItem("id"));let e=document.createElement("div");const{name:s,newPrice:o,img:c}=t;e.classList.add("cart__card");let n=parseInt(sessionStorage.getItem("count"));e.innerHTML=`\n          <img class="cart__img" src="images/dist/${c}.avif" alt="">\n          <span>${s}</span>\n          <div class="cart__count">\n            <button class="cart__count-btn cart__btn-more"> \n              <img class="cart__count-arrow" src="images/src/arrow-more.png" alt="">\n            </button>\n            <span class="cart__count-value">${n}</span>\n            <button class="cart__count-btn cart__btn-less">\n              <img class="cart__count-arrow" src="images/dist/arrow-less.avif" alt="">\n            </button>\n          </div>\n          <span class="cart__price">${o*n}</span>\n        `,listCartHTML.appendChild(e);let r=document.querySelector(".cart__btn-more"),a=document.querySelector(".cart__btn-less"),i=document.querySelector(".cart__count-value"),d=document.querySelector(".cart__price"),l=document.querySelector(".cart-value");r.onclick=function(){n+=1,sessionStorage.setItem("count",n),console.log("session"+sessionStorage.getItem("count")),i.textContent=n,d.textContent=o*n,l.textContent=n},a.onclick=function(){1===n&&listCartHTML.removeChild(e),n-=1,sessionStorage.setItem("count",n),console.log("session"+sessionStorage.getItem("count")),i.textContent=n,d.textContent=o*n,l.textContent=n}}))};let menu=document.querySelector(".menu"),menuOpen=document.querySelector(".menu-open"),menuItem=document.querySelectorAll(".menu__item");window.innerWidth<551&&menu.classList.add("visually-hidden"),menuOpen.onclick=function(){menu.classList.toggle("visually-hidden")};for(let t=0;t<menuItem.length;t++)menuItem[t].onclick=function(){menu.classList.add("visually-hidden")};let dropdown=document.querySelector(".menu__dropdown"),dropdownMenuOpen=document.querySelector(".menu__dropdown-open"),dropdownButton=document.querySelector(".menu__button-dropdown");dropdownMenuOpen.onclick=function(){dropdown.classList.toggle("visually-hidden"),dropdownButton.classList.toggle("menu__button-dropdown--active")},document.querySelector(".customer__slider")&&$(".customer__slider").slick({dots:!0,speed:300,slidesToShow:1,arrows:!1});let cartBtnOpen=document.querySelector(".cart-button"),cart=document.querySelector(".cart"),cartBtnClose=document.querySelector(".cart__close-btn");cartBtnOpen.onclick=function(){cart.classList.add("cart__open")},cartBtnClose.onclick=function(){cart.classList.remove("cart__open")};let buttonDesc=document.querySelector(".product-info__button-desc"),buttonAddition=document.querySelector(".product-info__button-addition"),textDesc=document.querySelector(".product-info__desc "),textAddition=document.querySelector(".product-info__addition");buttonDesc&&(buttonAddition.onclick=function(){textAddition.classList.remove("product-info__text-close"),textDesc.classList.add("product-info__text-close"),buttonAddition.classList.add("product-info__button--active"),buttonDesc.classList.remove("product-info__button--active")},buttonDesc.onclick=function(){textAddition.classList.add("product-info__text-close"),textDesc.classList.remove("product-info__text-close"),buttonAddition.classList.remove("product-info__button--active"),buttonDesc.classList.add("product-info__button--active")});let video=document.querySelector(".video__mp4"),playButton=document.querySelector(".video__play-btn"),closeButton=document.querySelector(".video__close-btn");playButton&&(playButton.onclick=function(){playButton.classList.add("visually-hidden"),video.classList.remove("visually-hidden"),closeButton.classList.remove("visually-hidden")},closeButton.onclick=function(){playButton.classList.remove("visually-hidden"),video.classList.add("visually-hidden"),closeButton.classList.add("visually-hidden")});